<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Smart.pr Labs â€“ Overview</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      padding: 32px;
      font: 14px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: #102027;
      background: #f4f7fb;
    }
    .page {
      max-width: 820px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      gap: 24px;
    }
    h1 {
      margin: 0;
      font-size: 26px;
      letter-spacing: -0.02em;
    }
    .lead {
      margin: 6px 0 0;
      color: #415a67;
    }
    .card {
      background: #fff;
      border-radius: 16px;
      padding: 24px;
      box-shadow: 0 8px 22px rgba(16, 32, 39, 0.08);
    }
    .card h2 {
      margin: 0 0 12px;
      font-size: 18px;
      color: #0f2c36;
    }
    .list {
      margin: 0;
      padding: 0;
      list-style: none;
      display: grid;
      gap: 16px;
    }
    .subextension {
      display: flex;
      align-items: flex-start;
      gap: 18px;
    }
    .subextension-info {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    .subextension-info strong {
      font-size: 15px;
    }
    .subextension-actions {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .status-pill {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(33, 150, 83, 0.18);
      color: #157347;
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.06em;
    }
    .status-pill.is-off {
      background: rgba(203, 48, 48, 0.16);
      color: #9c1c1c;
    }
    .metrics {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 18px;
    }
    .metric {
      background: #0f2c36;
      color: #e5f1f6;
      border-radius: 14px;
      padding: 16px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    .metric-label {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: rgba(229, 241, 246, 0.8);
    }
    .metric-value {
      font-size: 24px;
      font-weight: 600;
    }
    .metric-hint {
      font-size: 12px;
      color: rgba(229, 241, 246, 0.7);
    }
    .usage-updated {
      margin-top: 14px;
      font-size: 12px;
      color: #415a67;
    }
    .row {
      display: flex;
      gap: 10px;
      align-items: center;
      flex-wrap: wrap;
    }
    input[type="password"],
    input[type="text"] {
      flex: 1;
      min-width: 220px;
      padding: 12px 14px;
      border-radius: 10px;
      border: 1px solid #b8c7d0;
      font-size: 14px;
    }
    button {
      padding: 10px 16px;
      border-radius: 10px;
      border: 1px solid #0f2c36;
      background: #0f2c36;
      color: #e5f1f6;
      cursor: pointer;
      font-size: 14px;
      transition: transform 0.15s, box-shadow 0.15s, background 0.15s;
    }
    button.secondary {
      border-color: #cbd6dc;
      background: #ffffff;
      color: #0f2c36;
    }
    button:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(15, 44, 54, 0.2);
    }
    button.secondary:hover {
      background: #eef5f8;
    }
    small {
      color: #56707d;
    }
    .toggle-btn {
      min-width: 110px;
    }
    .metric.light {
      background: #ffffff;
      color: #0f2c36;
      border: 1px solid #d4e0e7;
    }
    .metric.light .metric-label {
      color: #415a67;
    }
    .metric.light .metric-hint {
      color: #5f7b8b;
    }
    .subsection-note {
      margin: 0 0 16px;
      color: #415a67;
    }
  </style>
</head>
<body>
  <div class="page">
    <header>
      <h1>Smart.pr Labs overview</h1>
      <p class="lead">Manage experimental helpers, monitor usage, and update your OpenAI API key.</p>
    </header>

    <section class="card" aria-labelledby="labs-subextensions">
      <h2 id="labs-subextensions">Subextensions</h2>
      <ul class="list">
        <li class="subextension">
          <div class="subextension-info">
            <strong>Angle Assistant</strong>
            <span>Generate subject line angles and draft press releases directly in Smart.pr compose forms.</span>
          </div>
          <div class="subextension-actions">
            <span class="status-pill" id="status-angle">On</span>
            <button class="toggle-btn secondary" id="toggle-angle">Turn off</button>
          </div>
        </li>
        <li class="subextension">
          <div class="subextension-info">
            <strong>PR Feedback Coach</strong>
            <span>Review full press releases and get actionable edits before you hit send.</span>
          </div>
          <div class="subextension-actions">
            <span class="status-pill" id="status-feedback">On</span>
            <button class="toggle-btn secondary" id="toggle-feedback">Turn off</button>
          </div>
        </li>
      </ul>
    </section>

    <section class="card" aria-labelledby="labs-usage">
      <h2 id="labs-usage">OpenAI usage</h2>
      <div class="metrics">
        <div class="metric">
          <span class="metric-label">Requests</span>
          <span class="metric-value" id="usage-requests">0</span>
          <span class="metric-hint">Total calls sent to the ChatGPT API</span>
        </div>
        <div class="metric">
          <span class="metric-label">Prompt tokens</span>
          <span class="metric-value" id="usage-prompt">0</span>
          <span class="metric-hint">Input tokens across all prompts</span>
        </div>
        <div class="metric">
          <span class="metric-label">Completion tokens</span>
          <span class="metric-value" id="usage-completion">0</span>
          <span class="metric-hint">Output tokens returned by ChatGPT</span>
        </div>
        <div class="metric">
          <span class="metric-label">Total tokens</span>
          <span class="metric-value" id="usage-total">0</span>
          <span class="metric-hint">Prompt + completion combined</span>
        </div>
      </div>
      <div class="usage-updated">
        Last updated: <span id="usage-updated">never</span>
      </div>
    </section>

    <section class="card" aria-labelledby="labs-costs">
      <h2 id="labs-costs">Estimated costs</h2>
      <p class="subsection-note">Rough estimate using GPT-4o mini pricing ($0.00015 prompt / $0.0006 completion per 1K tokens).</p>
      <div class="metrics">
        <div class="metric light">
          <span class="metric-label">Prompt cost</span>
          <span class="metric-value" id="cost-prompt">$0.00</span>
          <span class="metric-hint">Based on total prompt tokens</span>
        </div>
        <div class="metric light">
          <span class="metric-label">Completion cost</span>
          <span class="metric-value" id="cost-completion">$0.00</span>
          <span class="metric-hint">Based on returned tokens</span>
        </div>
        <div class="metric light">
          <span class="metric-label">Total estimate</span>
          <span class="metric-value" id="cost-total">$0.00</span>
          <span class="metric-hint">Prompt + completion combined</span>
        </div>
      </div>
    </section>

    <section class="card" aria-labelledby="labs-api-key">
      <h2 id="labs-api-key">OpenAI API key</h2>
      <p>Paste your personal OpenAI key (starts with <code>sk-</code>). It stays inside this browser profile via <code>chrome.storage.sync</code>.</p>
      <div class="row">
        <input id="key" type="password" placeholder="sk-..." autocomplete="off" />
        <button id="reveal" class="secondary">Show</button>
      </div>
      <div class="row">
        <button id="save">Save</button>
        <button id="test" class="secondary">Test key</button>
        <button id="clear" class="secondary">Clear</button>
      </div>
      <small>You can remove or update the key anytime. Testing runs a lightweight <code>/models</code> request.</small>
    </section>
  </div>
  <script src="options.js"></script>
</body>
</html>
